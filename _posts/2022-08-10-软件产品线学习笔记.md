---
layout: post
title: 软件产品线学习笔记
author: Frank Xinghan Zhao
category: Software Engineering
tags: softwareEngineering SPL
---

* content
  {:toc}

软件产品线学习笔记






## 什么是FAST

Family-Oriented Abstraction, specification, and Translation (FAST) 是传统软件开发过程的另一种选择，适用于需要针对产品开发多个不同版本的组织，这些不同的版本的软件拥有大量的相同特征，例如通用行为，通用界面，通用代码等。相对于维护这些共性因素的不同版本，FAST在这方面有很大的优势，因为FAST将这些看成一个整体实例。

FAST过程分成两个部分，领域工程（Domain engineering）和应用工程(Application engineering)，领域工程致力于理解产品族（family of product）的通用属性和差异的具体性质。这些分析和理解将被转成某种形式，如通用性子程序集合，或者领域特定的语言。我们将这种转换后的形式叫做应用工程环境（Application engineering environment）。

应用工程使用应用工程环境来产生产品族下属的不同产品。应用工程环境所造成的支出将会产生一个高效的过程，这样产品族下的很多产品将会被又快又好的研制。而使用过程中的反馈会给应用工程环境提供改进建议，这些改进通常会在对原来的领域进行影响分析后进行。

<div class = "mermaid">
graph TD
    t1(Domain Engineering)--create-->t2[Application Engineering Environment]--use-->t3(Application Engineering)--create-->t4[Applications]
    t3--FEEDBACK-->t1
</div>

## FAST的效能

领域工程的经济性分析如图所示

![](../images/2022-08-10-16-42-50.png)

如果在使用领域工程后，研发新品所支出的边际成本要小于没有使用领域工程的成本，则领域工程的投资将在生产若干新品后收回并产生盈余。在我们的经验中，边际成本的降低约为原来的四分之一，而初始投资通常小于研发三个新品的支出。

## FAST的步骤

### 领域工程

领域工程的具体工作分成以下几个步骤：

1. 领域分析

由相关专家收集产品族的相关知识，并形成文档。一个推荐的FAST方法是共性分析（Commonality analysis，具体参见下一小节内容）。它由一个结构化的交互过程组成，用来列举产品族中的共性和差异部分。在关键领域中，可以采用形式化方法来完成这项工作，但是最常用的还是采用自然语言来描述。文档中还通常会记录领域中的术语，分析工作的范围，以及分析期间发生的问题（及其解决方案）。

在共性分析期间，通常的做法是收集并使用示例场景来探索软件产品之间的差异。在这项工作中，我们会区分对可用性场景（usability scenarios,描述执行常见用户操作所需的操作）和可变性场景（variability scenarios, 强调各个产品之间的差异）。

2. 转换领域分析结果使其可用
  
该步骤常见的做法有两种：创建领域特定语言或者创建可组合的部件。前者是一个小型的语言，可以让用户指定产品族中可变性的具体状态；而后者是一个部件库。当然，第二种方法还需要设计一个总体框架来使用这些部件，并且还需要一个组合器（composer），这样设计师就可以在框架内选择不同的部件来实现特定的功能。

Lucent的交换部分使用了领域工程来提高效率并保持产品的高可靠性。大型系统，如5ESS（RM），是由好多更小的子系统研发的带，这些小系统每一个都提供了各自的优化时机。我们在这些子系统中应用领域工程，这些子系统都有自己各自输入和变更数据的窗体，如产生账单，展示交换机不同部件状态，监视和修正效能状态等。这些工程中很多都采用了创建领域特定语言，通常带有一个符合产品规格的图形界面。经统计，使用领域工程的工作组的生产率提高了三到五倍，生成的代码质量也超过了以前的版本。

### 共性分析

下表是我们在这个工程中的共性分析文档，该文档包含七个部分。前边的部分描述领域的概况，确定主要问题和设计要素。后边的部分通过不同产品的差异探究更多的细节。这些文档由一系列的中等规模的领域专家会议得到。

| 题目 | 主要内容 |
|- |- |
| 总体描述 | 对该领域和与其他领域的关系进行总体描述 |
| 术语 | 对专用术语进行定义和描述，这里应该对每一个术语的具体含义，以及在产品族中的作用描述清楚 | 
| 共性 | 通过一个结构化的判定集合来确定什么样的产品可以成为一个产品族，通常会划分成处理不同属性种类的子集 |
| 可变性 | 有关产品族中个体差异性的一个结构化的判定集合，也会按照共性那样划分成不同的子集 | 
| 差异性的具体参数 | 一个有关差异性的细化的参数列表， 加入了属性值的范围和每一个的绑定时机（参数在开发过程的哪一个阶段可以确定，通常为领域分析时、应用工程时、编译时、运行时） | 
| 问题 | 重要决策和替代方案的记录，通常形式为问题以及问题的解答 | 
| 场景 | 使用共性和差异性描述的例子 | 

场景的描述可以采用如下的形式：

- 状态： 四行，1列，2个行标题，3个列标题，窗口开始于第一列最后一行，鼠标在表格中心
- 参数值：卷动差值（scroll delta）可以是min,half,max的任意值
- 事件：移除行
- 行为：
  - 当卷动差值为最小，窗口只能往后卷动一行
  - 当卷动差值为一半，窗口可以卷动窗口高度的一半，此时，最后一个新行将下降到窗口的一半
  - 当卷动差值为最大，最后的新增行将降到窗口的底部

需要注意的是，这个例子描述了系统的几种可能的行为。每一个都反映了卷动插值的不同选择。这种场景描述了在产品中不同的差值是如何产生不同的行为的。这对于探索一个特定的光标/窗口的重定位的结果非常有用。

文中举个例子：三个人参加了本项案例的共性分析，他们总共举行了15次会议，大多数2个小时，时间持续了3个月，人工支出90人时。

## 窗体/光标重设的原型

一些主题如果没有图形的辅助是很难讨论的。许多的共性分析文档都包含了框图或其他图形。其中更复杂的概念之一就是改变窗体和光标的事件的序列。例如：当用户删除了一行，此时光标必须移动到新的一行，窗口可能也需要移动。我们将这种行为叫做光标/窗口重设（cursor/window repositioning）。一开始我们手绘了一张图来描述各种可能的顺序。然而我们很快就发现使用原型工具或许是一个更好的方法。于是，我们创建了一个简单的原型来描述可能的顺序。

当这个原型开始运行，它显示提供虚拟值的根窗口。列标题的虚拟值是“CH”，行标题是“RH”，核心是“R”。行和列的字段，如“POINTS”和“LAST NAME”，分别用“RL”和“CL”表示。矩形表示根窗口的显示区域，圆形表示光标的位置。用户可以通过点击鼠标重设光标的位置。
